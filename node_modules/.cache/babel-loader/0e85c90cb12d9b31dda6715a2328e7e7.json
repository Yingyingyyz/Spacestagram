{"ast":null,"code":"var _jsxFileName = \"/Users/Zoeyyy/Desktop/project/shopify-challenge/for_winter/src/pages/home/Home.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Container, Grid, useScrollTrigger, Slide, AppBar, Snackbar } from '@material-ui/core';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport CardItem from '../../components/cardItem/Index';\nimport { getDataAction } from '../../api';\nimport DatePickers from '../../components/datePicker/Index';\nimport { monthTimestamp } from '../../utlis';\nimport './Index.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Home(props) {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [data, setData] = useState([]);\n  const [startDate, setStartDate] = useState(new Date(new Date().valueOf() - monthTimestamp));\n  const [endDate, setEndDate] = useState(new Date());\n  const [loading, setLoading] = useState(true);\n  const [displayMsg, setDisplayMsg] = useState(false);\n\n  const getData = async (startDate, endDate) => {\n    setLoading(true);\n    const res = await getDataAction(startDate, endDate);\n    setData([...res]);\n    setLoading(false);\n  };\n\n  const handleSetStartDate = date => {\n    setStartDate(date);\n  };\n\n  const handleSetEndDate = date => {\n    setEndDate(date);\n  }; //1.获取图片详情资源列表\n  //2.只有在起始日期和终止日期发成变动时或者第一次进入页面时触发\n\n\n  useEffect(() => {\n    getData(startDate, endDate);\n  }, [startDate, endDate]); //添加监听事件,监听自定义分享图片链接事件\n\n  useEffect(() => {\n    const callback = function () {\n      setDisplayMsg(true);\n      setTimeout(() => setDisplayMsg(false), 3000);\n    };\n\n    document.addEventListener('successCopy', callback);\n    return () => {\n      document.removeEventListener('successCopy', callback);\n    };\n  }, []); //弹出成功分享图片链接提示\n\n  const Alert = props => {\n    return /*#__PURE__*/_jsxDEV(MuiAlert, {\n      elevation: 6,\n      variant: \"filled\",\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 16\n    }, this);\n  }; //滚动条滚动时隐藏或者显示appbar\n\n\n  const HideOnScroll = props => {\n    _s();\n\n    const {\n      children,\n      window\n    } = props;\n    const trigger = useScrollTrigger({\n      target: window ? window() : undefined\n    });\n    return /*#__PURE__*/_jsxDEV(Slide, {\n      appear: false,\n      direction: \"down\",\n      in: !trigger,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this);\n  };\n\n  _s(HideOnScroll, \"EC2GbbZl9x3XKoXLVx1H89cOBi0=\", false, function () {\n    return [useScrollTrigger];\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(HideOnScroll, { ...props,\n      children: /*#__PURE__*/_jsxDEV(AppBar, {\n        className: \"appBar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Spacestagram\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Brought to you by NASA's Astronomy Photo of the Day (APOD) API\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DatePickers, {\n          startDate: startDate,\n          endDate: endDate,\n          onEndDateChange: handleSetEndDate,\n          onStartDateChange: handleSetStartDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Snackbar, {\n        open: displayMsg,\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"success\",\n          children: \"Image URL successfully copied to clipboard!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        direction: \"row\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        spacing: 4,\n        container: true,\n        children: data.map((imageContent, index) => {\n          return /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(CardItem, { ...imageContent\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 37\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: loading && /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(Home, \"s6lq1TQAe1AsEXyuA8vFqX/cpug=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/Zoeyyy/Desktop/project/shopify-challenge/for_winter/src/pages/home/Home.js"],"names":["React","useEffect","useState","Container","Grid","useScrollTrigger","Slide","AppBar","Snackbar","MuiAlert","CardItem","getDataAction","DatePickers","monthTimestamp","Home","props","data","setData","startDate","setStartDate","Date","valueOf","endDate","setEndDate","loading","setLoading","displayMsg","setDisplayMsg","getData","res","handleSetStartDate","date","handleSetEndDate","callback","setTimeout","document","addEventListener","removeEventListener","Alert","HideOnScroll","children","window","trigger","target","undefined","map","imageContent","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Container, Grid, useScrollTrigger, Slide, AppBar, Snackbar } from '@material-ui/core';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport CardItem from '../../components/cardItem/Index';\r\nimport { getDataAction } from '../../api';\r\nimport DatePickers from '../../components/datePicker/Index'\r\nimport { monthTimestamp } from '../../utlis';\r\nimport './Index.scss'\r\n\r\nfunction Home(props) {\r\n    const [data, setData] = useState([]);\r\n    const [startDate, setStartDate] = useState(new Date(new Date().valueOf() - monthTimestamp));\r\n    const [endDate, setEndDate] = useState(new Date());\r\n    const [loading, setLoading] = useState(true);\r\n    const [displayMsg, setDisplayMsg] = useState(false);\r\n\r\n    const getData = async (startDate, endDate) => {\r\n        setLoading(true);\r\n        const res = await getDataAction(startDate, endDate);\r\n        setData([...res]);\r\n        setLoading(false);\r\n    }\r\n    const handleSetStartDate = (date) => {\r\n        setStartDate(date)\r\n    }\r\n    const handleSetEndDate = (date) => {\r\n        setEndDate(date)\r\n\r\n    }\r\n    //1.获取图片详情资源列表\r\n    //2.只有在起始日期和终止日期发成变动时或者第一次进入页面时触发\r\n    useEffect(() => {\r\n        getData(startDate, endDate);\r\n    }, [startDate, endDate]);\r\n\r\n    //添加监听事件,监听自定义分享图片链接事件\r\n    useEffect(() => {\r\n        const callback = function () {\r\n            setDisplayMsg(true);\r\n            setTimeout(() => setDisplayMsg(false), 3000)\r\n        }\r\n        document.addEventListener('successCopy', callback);\r\n        return () => {\r\n            document.removeEventListener('successCopy', callback)\r\n        }\r\n    }, [])\r\n\r\n    //弹出成功分享图片链接提示\r\n    const Alert = (props) => {\r\n        return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n    }\r\n\r\n    //滚动条滚动时隐藏或者显示appbar\r\n    const HideOnScroll = (props) => {\r\n        const { children, window } = props;\r\n        const trigger = useScrollTrigger({ target: window ? window() : undefined });\r\n        return (\r\n            <Slide appear={false} direction=\"down\" in={!trigger}>\r\n                {children}\r\n            </Slide>\r\n        );\r\n    }\r\n    return (\r\n        <div className=\"home\">\r\n            <HideOnScroll {...props}>\r\n                <AppBar className=\"appBar\" >\r\n                    <div >\r\n                        <h2>Spacestagram</h2>\r\n                        <span >\r\n                        Brought to you by NASA's Astronomy Photo of the Day (APOD) API\r\n\r\n\r\n                        </span>\r\n                    </div>\r\n                    <DatePickers\r\n                        startDate={startDate}\r\n                        endDate={endDate}\r\n                        onEndDateChange={handleSetEndDate}\r\n                        onStartDateChange={handleSetStartDate}\r\n                    />\r\n                </AppBar>\r\n            </HideOnScroll>\r\n            <Container className=\"container\">\r\n\r\n                <Snackbar open={displayMsg}>\r\n                    <Alert severity=\"success\">\r\n                        Image URL successfully copied to clipboard!\r\n                    </Alert>\r\n                </Snackbar>\r\n                <Grid\r\n                    direction=\"row\"\r\n                    justifyContent=\"center\"\r\n                    alignItems=\"center\"\r\n                    spacing={4}\r\n                    container\r\n                >\r\n                    {\r\n                        data.map((imageContent, index) => {\r\n                            return (\r\n                                <React.Fragment key={index}>\r\n                                    <Grid item>\r\n                                        <CardItem {...imageContent} />\r\n                                    </Grid>\r\n                                </React.Fragment>\r\n                            )\r\n                        })\r\n                    }\r\n                </Grid>\r\n                <div className=\"loading\">\r\n                    {\r\n                        loading && (\r\n                            <h1  >Loading...</h1>\r\n                        )\r\n                    }\r\n                </div>\r\n\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}